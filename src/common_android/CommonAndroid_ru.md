### [1] Что такое программный стек Android (Android Software Stack). Каковы основные компоненты архитектуры платформы Android?

Приложения работают поверх программного стека, основанного на ядре Linux, собственных библиотеках C/C++ и среде
выполнения, которая выполняет код приложения.

![img.png](img/AndroidSoftwareStack.png)

С верха стека:

1. **System Apps (Системные приложения)** - приложения написанные на Java и использующие библиотеки и фреймфорки из Java
   Api Frameworks. Содержит в себе предустановленный набор приложений, который можно переиспользовать. Например, если вы
   хотите отправить СМС,не нужно создавать этот функционал заново - можно использовать системное приложение.

2. **Java API Framework** -  **Весь набор функций ОС Android** доступен вам **через API**, написанные на языке Java. Он
   содержит классы Android, которые управляют интерфейсами (окнами) системы, компонентами графического интерфейса,
   ресурсами и т. д. — в основном все, что требуется для написания приложения Android на Java. Фреймфорк **определяет и
   управляет жизненными циклами** компонентов Android и их взаимодействие. Он определяет набор специфичных для Android
   асинхронных механизмов, которые приложения могут использовать для упрощения управления потоками: HandlerThread,
   AsyncTask, IntentService, AsyncQueryHandler и т. д.

3. **Native libraries (Системные библиотеки)** - библиотеки написанные на языках C/C++, которые работают непосредственно
   с графикой, шрифтами, системными ресурсами, базами данных и тд. Многие основные системные компоненты и службы
   Android, такие как ART и HAL, созданы из нативного кода, для которого требуются нативные библиотеки, написанные на C
   и C++. Приложения Java обычно не взаимодействуют напрямую с нативными библиотеками, поскольку среда приложений
   предоставляет Java-оболочки для нативного кода. Но если вы разрабатываете приложение, для которого требуется код C
   или C++, вы можете использовать _Android NDK_ для доступа к некоторым из этих нативных библиотек платформы.

   Native Development Kit (NDK) — это набор инструментов, который позволяет использовать код C и C++ с Android.
   Позволяет создавать **критичные для производительности** части вашего приложения. Если вы пишете нативный код, этот
   код компилируется в нативную библиотеку, которую Gradle может упаковать в ваш apk.

4. **Android Runtime (среда выполнения)** - Каждое приложение работает в своем собственном
   процессе ([Вопрос App Sandbox](#3----app-sandbox)) и с собственным экземпляром среды выполнения (Android Runtime).
   Среда выполнения Android предназначена для запуска нескольких виртуальных машин на устройствах с малым объемом памяти
   путем выполнения файлов DEX. Файлы DEX — формат байт-кода, разработанный специально для Android и оптимизированный
   для минимального использования памяти. Инструменты сборки, такие как d8, [компилируют](#4---) исходные коды Java в
   байт-код DEX, который может работать на платформе Android.

   До версии Android 5.0 (уровень API 21) это был Dalvik, но теперь это ART ([Dalvik vs ART](#2---dalvik--art-)).

5. **Hardware Abstraction Layer (уровень аппаратной абстракции)** предоставляет стандартные интерфейсы, которые
   предоставляют аппаратные возможности устройства высокоуровневой Java API Framework. HAL состоит из нескольких
   библиотечных модулей, каждый из которых реализует интерфейс для определенного типа аппаратных компонентов, таких как,
   например, камера или модуль Bluetooth. Когда приложение обращается к аппаратному API, система Android загружает
   библиотечный модуль для этого аппаратного компонента.

6. Linux kernel (ядро Linux) -  Основа платформы Android. Android полагается на ядро Linux для базовых функций,
   таких как **управление потоками** и **низкоуровневого управление памятью**. Ядро Linux запускает процесс (ответвляет от родительского) для каждого приложения. Каждый процесс
   **содержит среду выполнения** с работающим приложением. Кроме того, внутри процесса несколько потоков могут выполнять код приложения.
   Ядро распределяет доступное время выполнения ЦП для процессов и их потоков с помощью планирования (_scheduling_).

### [2] Разница между *Dalvik* и *ART* ?

### [3] Что такое песочница (App Sandbox)?

### [4] Процесс сборки приложения
